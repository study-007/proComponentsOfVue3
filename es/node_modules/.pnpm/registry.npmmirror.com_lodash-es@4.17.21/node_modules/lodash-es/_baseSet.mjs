import _ from "./_assignValue.mjs";
import e from "./_castPath.mjs";
import g from "./_isIndex.mjs";
import p from "./isObject.mjs";
import l from "./_toKey.mjs";
function P(i, t, u, m) {
  if (!p(i))
    return i;
  t = e(t, i);
  for (var f = -1, s = t.length, x = s - 1, n = i; n != null && ++f < s; ) {
    var r = l(t[f]), o = u;
    if (r === "__proto__" || r === "constructor" || r === "prototype")
      return i;
    if (f != x) {
      var d = n[r];
      o = m ? m(d, r, n) : void 0, o === void 0 && (o = p(d) ? d : g(t[f + 1]) ? [] : {});
    }
    _(n, r, o), n = n[r];
  }
  return i;
}
export {
  P as default
};
